{% extends 'base.html' %}
{% load static %}
{% block content %}
<p class="hidden" id="collection-id">{{ collection.id }}</p>
<div class="max-w-[1240px] mt-[62px] mx-auto flex flex-col justify-between items-stretch px-[25px]">
    <div class="flex flex-row items-center justify-between w-full">
        <div>
            <h3 class="md:text-[32px] font-semibold capitalize">{{ collection.name }}</h3>
            <p class="text-xs font-medium text-[#525156] md:hidden">{{ pagination.total }} Items available</p>
        </div>
        <a class="md:hidden px-[10px] py-1.5 md:px-8 md:py-3 rounded-md bg-[#EAECEF]" href="{% url 'add-item-collection-page' collection.id %}">
            <span class="text-xs md:text-base font-medium capitalize">Add item</span>
        </a>
        <div x-data="{ isModalOpen: false }" class="relative md:flex flex-col items-end justify-start hidden">
            <button @click="isModalOpen = true" class="px-[10px] py-1.5 md:px-8 md:py-3 rounded-md bg-[#EAECEF]">
                <span class="text-xs md:text-base font-semibold capitalize">Add items</span>
            </button>
            <div x-show="isModalOpen" @click.away="isModalOpen = false" x-transition
                class="absolute right-0 space-y-2.5 z-10 rounded-md shadow-lg top-12 h-[500px] w-[420px] bg-white p-9 overflow-auto">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold">Add items in Collection</h2>
                    <button @click="isModalOpen = false" class="text-3xl ">
                        &times;
                    </button>
                </div>
                <div>
                    <p class="text-sm mt-4" >Which product would you like to add?</p>
                    <form id="search-form" method="get">
                        <div id="search-buys"
                            class="search mt-2.5 border-[#DDE2E4] border rounded-md p-3 flex flex-row justify-start items-center gap-2 ">
                            <div class="w-[18px] h-[18px]">
                                <span data-icon="search" class=""></span>
                            </div>
                            <input type="search" name="query" placeholder="Search cards by name"
                                class="w-full border-none outline-none text-xs md:text-base" />
                        </div>
                    </form>
                </div>
                <div id="cards-list" class="grid gap-y-4">

                </div>
            </div>
        </div>
    </div>
    <div class="h-[1px] bg-[#1e232933] w-full mt-5 md:mt-6 md:hidden"></div>
    <div class="flex-1">
        <div id="favouite-cards" class="grid grid-cols-4 lg:grid-cols-5 gap-5 md:gap-[50px] mt-5">
            {% for card in cards %}
            <div class="w-20 md:w-[203px]">
                <img src="{{ card.images.small }}" alt="" />
            </div>
            {% endfor %}
        </div>
        {% with pagination.params as params %}
        <div id="pagination" class="hidden md:flex justify-center w-full mt-4 mb-8 items-center gap-2">
            {% if pagination.has_prev %}
            <a href="?page={{ pagination.page|add:-1 }}&limit={{ pagination.limit }}&{{ params }}" class="w-5 h-5 rounded-full border border-1 flex"><img src="{% static 'icons/arrow-left.svg' %}" /></a>
            {% else %}
            <a class="w-5 h-5 rounded-full border border-1 border-[#E4E7E9] flex"><img src="{% static 'icons/arrow-left.svg' %}" /></a>
            {% endif %}
            {% for num in pagination.page_range %}
            {% if num == pagination.page %}
            <div class="w-8 h-8 rounded-full bg-[#F6D658] grid place-items-center"><p class="text-xs font-semibold">{{ num }}</p></div>
            {% else %}
            <a href="?page={{ num }}&limit={{ pagination.limit }}&{{ params }}" class="border-[#E4E7E9] border border-1 w-8 h-8 rounded-full grid place-items-center"><p class="text-xs font-normal">{{ num }}</p></a>
            {% endif %}
            {% endfor %}
            {% if pagination.has_next %}
            <a href="?page={{ pagination.page|add:1 }}&limit={{ pagination.limit }}&{{ params }}" class="w-5 h-5 rounded-full border border-1 flex"><img src="{% static 'icons/arrow-right.svg' %}" /></a>
            {% else %}
            <a class="w-5 h-5 rounded-full border border-1 border-[#E4E7E9] flex"><img src="{% static 'icons/arrow-right.svg' %}" /></a>
            {% endif %}
            {% endwith %}
        </div>
        {% with pagination.params as params %}
        <div id="pagination" class="md:hidden flex justify-center w-full mt-4 mb-8 items-center gap-2">
            {% if pagination.has_prev %}
            <a href="?page={{ pagination.page|add:-1 }}&limit={{ pagination.limit }}&{{ params }}" class="w-3 h-3 rounded-full border border-1 flex"><img src="{% static 'icons/arrow-left.svg' %}" /></a>
            {% else %}
            <a class="w-3 h-3 rounded-full border border-1 border-[#E4E7E9] flex"><img src="{% static 'icons/arrow-left.svg' %}" /></a>
            {% endif %}
            {% for num in pagination.page_range %}
            {% if num == pagination.page %}
            <div class="w-5 h-5 rounded-full bg-[#F6D658] grid place-items-center"><p class="text-xs font-semibold">{{ num }}</p></div>
            {% else %}
            <a href="?page={{ num }}&limit={{ pagination.limit }}&{{ params }}" class="border-[#E4E7E9] border border-1 w-5 h-5 rounded-full grid place-items-center"><p class="text-xs font-normal">{{ num }}</p></a>
            {% endif %}
            {% endfor %}
            {% if pagination.has_next %}
            <a href="?page={{ pagination.page|add:1 }}&limit={{ pagination.limit }}&{{ params }}" class="w-3 h-3 rounded-full border border-1 flex"><img src="{% static 'icons/arrow-right.svg' %}" /></a>
            {% else %}
            <a class="w-3 h-3 rounded-full border border-1 border-[#E4E7E9] flex"><img src="{% static 'icons/arrow-right.svg' %}" /></a>
            {% endif %}
        </div>
    </div>
</div>
<script src="{% static 'js/collections.js' %}"></script>
{% endwith %}
{% endblock %}
